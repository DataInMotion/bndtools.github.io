<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Bndtools » Home</title>
<meta name="description" content>
<meta name="author" content="Neil Bartlett">
<link rel="alternate" type="application/rss+xml" title="Bndtools News RSS Feed" href="./rss.xml"></link>

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le styles -->
<link href="./css/bootstrap.css" rel="stylesheet">
<link href="./css/hk-kate.css" rel="stylesheet" media="screen">
<style type="text/css">
body {
	padding-top: 60px;
}
section {
  padding-top: 40px;
}
section &gt; .row {
  margin-bottom: 10px;
}
</style>

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="./images/favicon.ico">
<link rel="apple-touch-icon" href="./images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/apple-touch-icon-114x114.png">
</head>

<body>
	<div class="topbar" data-dropdown="dropdown">
		<div class="topbar-inner">
			<div class="container-fluid">
				<a class="brand" href="./index.html">
					<img src="./images/logo-topbar.png"></img>
				</a>
				<ul>
	<li><a href="./index.html">Home</a></li>
	<li><a href="./news.html">News</a></li>
	<li><a href="./installation.html">Install</a></li>
	<li><a href="./tutorial.html">Tutorial</a></li>
	<li><a href="./faq.html">FAQ</a></li>
	<li><a href="./training.html">Training</a></li>
<ul>
			</div>
		</div>
	</div>

<div class="container">
	<div class="content">
		<div class="hero-unit">
	<h1>Bndtools FAQ</h1>
	<p>Frequently Asked Questions</p>
</div>

<h1 id="TOC">Table of Contents</h1><ul>
                                   <li><a href="#how-do-i-add-bundles-to-the-repository"><span class="toc-section-number">0.1</span> How Do I Add Bundles to the Repository?</a></li>
                                   <li><a href="#how-do-i-remove-bundles-from-a-repository"><span class="toc-section-number">0.2</span> How Do I Remove Bundles from a Repository?</a></li>
                                   <li><a href="#why-is-my-bundle-empty"><span class="toc-section-number">0.3</span> Why is My Bundle Empty?</a></li>
                                   <li><a href="#whats-the-difference-between--include-and-include-resource"><span class="toc-section-number">0.4</span> What’s the Difference Between “-include” and “Include-Resource”?</a></li>
                                   <li><a href="#how-can-i-configure-the-system-bundle-exports"><span class="toc-section-number">0.5</span> How Can I Configure the System Bundle Exports?</a></li>
                                   <li><a href="#how-can-i-depend-on-a-plain-jar-file-at-build-time"><span class="toc-section-number">0.6</span> How Can I Depend on a Plain JAR File at Build Time?</a></li>
                                   </ul>
<h2 id="how-do-i-add-bundles-to-the-repository"><a href="#TOC"><span class="header-section-number">0.1</span> How Do I Add Bundles to the Repository?</a></h2>
<p>There are several ways to add external bundles into your repository in order to make them available in your projects. The easiest way is to drag-and-drop from your native file management application (i.e. Windows Explorer, Mac Finder, etc) into the <strong>Repositories</strong> view in Bndtools. Note that you need to drop it onto a specific repository entry: usually the “Local Repository”. Note that you can multi-select many bundle files and drag/drop them at the same time.</p>
<div class="figure">
<img src="./images/faq/01.png"></img><p class="caption"></p>
</div>
<p>Importing the bundles this way is better than directly modifying the contents of the <code>cnf/repo</code> directory, since Bndtools is immediately aware of the new bundles and regenerates the OBR index for the repository.</p>
<p><strong>NB:</strong> not all repository types support adding bundles! For example, the <code>OBR</code> repository type is based on an index file that may be anywhere local or remote; Bndtools would not know where to put the new bundle or how to update the index. However the following repository types <em>do</em> support additions:</p>
<ul>
<li><code>LocalOBR</code></li>
<li><code>FileRepo</code></li>
</ul>
<h2 id="how-do-i-remove-bundles-from-a-repository"><a href="#TOC"><span class="header-section-number">0.2</span> How Do I Remove Bundles from a Repository?</a></h2>
<p>Unfortunately the current repository API does not support a generic way to remove bundles. We plan to update this API, but for now it is necessary to remove the bundles manually from the filesystem.</p>
<p>For repositories of type <code>LocalOBR</code> perform the following steps:</p>
<ol style="list-style-type: decimal">
<li>Delete the bundle file from <code>&lt;repo_dir&gt;/&lt;bsn&gt;</code>. If you want to delete all versions of the bundle, then also delete the <code>&lt;bsn&gt;</code> directory itself (i.e., do not leave an empty directory).</li>
<li>Delete the OBR index file, <code>&lt;repo_dir&gt;/repository.xml</code>.</li>
<li>Touch the <code>cnf/build.bnd</code> file. This causes the index file to be regenerated and the repository contents to be refreshed.</li>
</ol>
<p>For repositories of type <code>FileRepo</code>, perform the same steps except for deleting the OBR index (which will not exist anyway).</p>
<h2 id="why-is-my-bundle-empty"><a href="#TOC"><span class="header-section-number">0.3</span> Why is My Bundle Empty?</a></h2>
<p>In Bndtools the contents of a bundle must be defined explicitly; if the contents are not defined then the bundle will be empty. Bundle contents are defined using the following three instructions (follow links to the bnd documentation for these instructions):</p>
<ul>
<li><a href="http://www.aqute.biz/Bnd/Format#private-package"><code>Private-Package</code></a> defines Java packages to be included in the bundle but not exported.</li>
<li><a href="http://www.aqute.biz/Bnd/Format#export-package"><code>Export-Package</code></a> defines Java packages to be both included in the bundle <em>and</em> exported.</li>
<li><a href="http://www.aqute.biz/Bnd/Format#include-resource"><code>Include-Resource</code></a> defines non-Java resource files (e.g. images, XML files etc) to be included in the bundle.</li>
</ul>
<p>Note that both <code>Private-Package</code> and <code>Export-Package</code> may be edited using the <em>Contents</em> tab of the GUI editor. There is currently no GUI assistance for the <code>Include-Resource</code> instruction so it must be entered using the <em>Source</em> tab.</p>
<h2 id="whats-the-difference-between--include-and-include-resource"><a href="#TOC"><span class="header-section-number">0.4</span> What’s the Difference Between “-include” and “Include-Resource”?</a></h2>
<p>The <a href="http://www.aqute.biz/Bnd/Format#directives"><code>-include</code></a> instruction is used to include a set of bnd instructions from another <code>.bnd</code> file into the current <code>.bnd</code> file. This can be useful if there are common settings or instructions used in multiple places.</p>
<p>The <a href="http://www.aqute.biz/Bnd/Format#include-resource"><code>Include-Resource</code></a> instruction tells bnd to include a set of non-Java resources (e.g. images, XML files etc) in the output bundle.</p>
<h2 id="how-can-i-configure-the-system-bundle-exports"><a href="#TOC"><span class="header-section-number">0.5</span> How Can I Configure the System Bundle Exports?</a></h2>
<p>To add extra packages to the exports of the OSGi System Bundle, use the <code>-runsystempackages</code> instruction to your run configuration file. For example:</p>
<pre><code>-runsystempackages: sun.reflect
</code></pre>
<p>You can also add library JARs to the Java application “classpath” using the <code>-runpath</code> instruction, which would then allow you to expose the contents of those libraries via system bundle exports:</p>
<pre><code>-runpath: jide-oss-1.0.0.jar
-runsystempackages: com.jidesoft.swing, com.jidesoft.animation
</code></pre>
<p>Note that using the <code>-runsystempackages</code> instruction is equivalent to setting the OSGi property <code>org.osgi.framework.system.packages.extra</code>; however it is better to use <code>-runsystempackages</code> because then the OBR resolver inside Bndtools will take account of the availability of those packages during resolution.</p>
<h2 id="how-can-i-depend-on-a-plain-jar-file-at-build-time"><a href="#TOC"><span class="header-section-number">0.6</span> How Can I Depend on a Plain JAR File at Build Time?</a></h2>
<p>Sometimes it is useful to add a plain JAR file to the build-time dependencies of a project. For example we may want to use a “pure” API JAR to build against, but use a different artefact at runtime. Or we may be planning to embed the dependency in our bundle.</p>
<p>Plain JAR files should be added to the Build Path using the <code>version=file</code> attribute. Unfortunately there is currently no GUI support for this attribute so you will have to edit the <em>Source</em> tab:</p>
<pre><code>-buildpath: libs/servlet-api-3.0.jar;version=file
</code></pre>
<p>Note that this approach is better than using Eclipse’s <em>Add to Build Path</em> action, because the latter will not be visible when the project is built offline using ANT; i.e. a project that compiles in Eclipse may not compile in ANT. Using the <code>-buildpath</code> approach ensures that both Eclipse and ANT build the project in exactly the same way.</p>

	</div>
	<footer>
		<div class="well">
			<p>© <a href="mailto:njbartlett@gmail.com">Neil Bartlett</a> 2011. Built with <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> and <a href="http://jaspervdj.be/hakyll/index.html">Hakyll</a>.</p>
		</div>
	</footer>
</div>

<div class="sidebar">
	<div class="well">
		<h2>Navigation</h2>
<ul>
	<li><a href="./index.html">Home</a></li>
	<li><a href="./news.html">News</a></li>
	<li><a href="./whatsnew1-0-0/">What's New in 1.0.0</a></li>
</ul>

<h3>Documentation</h3>
<ul>
	<li><a href="./installation.html">Installation</a></li>
	<li><a href="./tutorial.html">Tutorial</a></li>
	<li><a href="./concepts.html">Index of Concepts</a></li>
	<li><a href="./faq.html">FAQ</a></li>
	<li><a href="./release-notes.html">Release Notes</a></li>
	<li><a href="./development.html">Development</a></li>
	<li><a href="./training.html">Training</a></li>
</ul>
	</div>
</div>

<script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
<script src="./js/bootstrap-dropdown.js"></script>

</body>
</html>
